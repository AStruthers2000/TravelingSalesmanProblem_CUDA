\doxysection{TSP/\+Algorithms/\+Ant\+Colony.cu File Reference}
\hypertarget{AntColony_8cu}{}\label{AntColony_8cu}\index{TSP/Algorithms/AntColony.cu@{TSP/Algorithms/AntColony.cu}}
{\ttfamily \#include "{}Ant\+Colony.\+cuh"{}}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$curand\+\_\+kernel.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \mbox{\hyperlink{AntColony_8cu_a34e80c6e6dcf61cb7ab6db47fcd5c893}{ACO\+\_\+main}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{adj\+\_\+mat}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{size}})
\begin{DoxyCompactList}\small\item\em The main entry point for the ACO algorithm. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_a0c7f129a227865f2816ecdc1561768a1}{move\+\_\+ant}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\+\_\+pheromones}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\+\_\+distances}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curand\+State}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{states}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+distances}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+tours}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+visited}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\+\_\+cities}})
\begin{DoxyCompactList}\small\item\em Function that handles the probabilistic tour generation behavior each ant will have. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_afb1bca5bb39ac0b73c92b33b57123d53}{evaporate\+\_\+pheromone}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\+\_\+pheromones}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\+\_\+cities}})
\begin{DoxyCompactList}\small\item\em Allows for uniform pheromone evaporation. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_a8628347ed6a7c0800505c9def85d48fb}{update\+\_\+pheromone}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\+\_\+pheromones}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+distances}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+tours}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\+\_\+cities}})
\begin{DoxyCompactList}\small\item\em Updating the pheromones according to the standard constant pheromone deposit method. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_af524c262fedf7990583bf352fe3715bb}{reset\+\_\+histories}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+distances}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+tours}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\+\_\+visited}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\+\_\+cities}})
\begin{DoxyCompactList}\small\item\em A function used to reset the histories of each ant to prevent confusion in future iterations. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_a6090d150f203e8e23592b9f30998b808}{allocate\+\_\+memory}} ()
\begin{DoxyCompactList}\small\item\em A function used to allocate all host and device memory in one organized location. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_a673fea64299ecd234b011d0317c12a2d}{initialize\+\_\+values}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{adj\+\_\+mat}})
\begin{DoxyCompactList}\small\item\em A function used to initialize all host memory and copy over initial states to the device when necessary. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_a9f81a9a3690fcba7180fa860e0c2422f}{free\+\_\+memory}} ()
\begin{DoxyCompactList}\small\item\em A function used to free all host and device memory at the end of runtime execution. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+device\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{unsigned}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_a1b5a49b05177027e38314c434c172472}{get\+\_\+index}} ()
\begin{DoxyCompactList}\small\item\em A helper function to calculate the unique thread ID. \end{DoxyCompactList}\item 
\+\_\+\+\_\+global\+\_\+\+\_\+ void \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{setup\+\_\+curand\+\_\+states}} (curand\+State \texorpdfstring{$\ast$}{*}dev\+\_\+states, unsigned long seed)
\begin{DoxyCompactList}\small\item\em A helper function to initialize cu\+RAND states with a random seed. \end{DoxyCompactList}\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} \mbox{\hyperlink{AntColony_8cu_af49fe3083b19f6f211b2c8d626854170}{print\+\_\+matrix}} (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix}}, \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{char}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{msg}})
\begin{DoxyCompactList}\small\item\em A simple helper function to print a matrix, useful for debugging. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95}{host\+\_\+distances}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}{host\+\_\+pheromones}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82}{dev\+\_\+distances}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\+\_\+pheromones}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_a7e7f9470775e0e11270fdd04c2f6cfe5}{host\+\_\+distances\+History}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\+\_\+distances\+History}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}{dev\+\_\+tours\+History}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_a804e24c44514a093b2e4540f827fb263}{dev\+\_\+visited\+History}}
\item 
\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curand\+State}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4}{dev\+\_\+curand\+States}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{AntColony_8cu_a34e80c6e6dcf61cb7ab6db47fcd5c893}\label{AntColony_8cu_a34e80c6e6dcf61cb7ab6db47fcd5c893} 
\index{AntColony.cu@{AntColony.cu}!ACO\_main@{ACO\_main}}
\index{ACO\_main@{ACO\_main}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{ACO\_main()}{ACO\_main()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} ACO\+\_\+main (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{adj\+\_\+mat,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}}}]{size }\end{DoxyParamCaption})}



The main entry point for the ACO algorithm. 

Handles the allocation, initialization, running, and freeing of all memory throughout the simulation. This function is passed an adjacency matrix that defines the problem we are trying to solve, as well as the problem size. This function is responsible for all the kernel calls needed for ACO, and iterates the desired number of iterations, performing memory management when necessary. 
\begin{DoxyParams}{Parameters}
{\em adj\+\_\+mat} & The problem definition. A flattened 1D array that represents the problem instance. Can be symmetric or asymmetric \\
\hline
{\em size} & The problem size, aka the number of cities \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The best solution generated by any ant after the desired number of iterations 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00032}{32}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{size}};}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a6090d150f203e8e23592b9f30998b808}{allocate\_memory}}();}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a673fea64299ecd234b011d0317c12a2d}{initialize\_values}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{adj\_mat}});}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//print\_matrix(host\_distances,\ "{}Distances"{});}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//print\_matrix(host\_pheromones,\ "{}Pheromones"{});}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{time\_t}}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{seed}};}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{time}}(\&\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{seed}});}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//initializes\ cuRAND\ states.\ Currently,\ the\ device\ handles\ random\ number\ generation\ when\ needed.\ We\ could\ optimize\ this}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//by\ pre-\/generating\ many\ numbers\ that\ we\ pass\ to\ the\ device\ and\ use\ on\ the\ device\ when\ necessary.\ This\ could\ improve\ the\ runtime}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//efficiency,\ but\ for\ now\ this\ solution\ is\ sufficient}}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{setup\_curand\_states<<<GROUPS\_OF\_N\_ANTS,\ THREADS\_PER\_BLOCK>}}>>(\mbox{\hyperlink{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4}{dev\_curandStates}},\ (\textcolor{keywordtype}{unsigned}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{long}})\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{seed}});}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaDeviceSynchronize}}();}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_blocks}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{floor}}((\mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}})\ /\ \mbox{\hyperlink{ModelParameters_8h_a869bf6501bf4809f3de1db59ef2dd914}{THREADS\_PER\_BLOCK}}))\ +\ 1;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{iter}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{iter}}\ <\ \mbox{\hyperlink{ModelParameters_8h_ab3be0641eb76161a48ed528e6eea2ac3}{NUM\_ITERATIONS}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{iter}}++)}
\DoxyCodeLine{00055\ \ \ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{comment}{//the\ first\ part\ of\ ACO\ is\ having\ each\ ant\ move\ and\ generate\ a\ single\ solution\ probabilistically}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{move\_ant<<<GROUPS\_OF\_N\_ANTS,\ THREADS\_PER\_BLOCK>}}>>(\mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\_pheromones}},\ \mbox{\hyperlink{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82}{dev\_distances}},\ \mbox{\hyperlink{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4}{dev\_curandStates}},\ \mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\_distancesHistory}},}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}{dev\_toursHistory}},\ \mbox{\hyperlink{AntColony_8cu_a804e24c44514a093b2e4540f827fb263}{dev\_visitedHistory}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}});}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaDeviceSynchronize}}();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{comment}{//the\ following\ commented\ code\ is\ useful\ for\ logging\ the\ fitness\ each\ iteration.\ This\ clearly\ takes\ more\ time\ than}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{comment}{//necessary\ when\ we\ don't\ care\ about\ the\ fitness\ each\ iteration,\ but\ can\ be\ useful\ for\ determining\ fitness\ behavior}}
\DoxyCodeLine{00063\ \textcolor{comment}{//\ \ \ \ \ \ \ \ auto\ host\_dist\ =\ (double*)(malloc(NUM\_ANTS\ *\ sizeof(double)));}}
\DoxyCodeLine{00064\ \textcolor{comment}{//\ \ \ \ \ \ \ \ cudaMemcpy(host\_dist,\ dev\_distancesHistory,\ NUM\_ANTS\ *\ sizeof(double),\ cudaMemcpyDeviceToHost);}}
\DoxyCodeLine{00065\ \textcolor{comment}{//\ \ \ \ \ \ \ \ double\ sum\ =\ 0.0;}}
\DoxyCodeLine{00066\ \textcolor{comment}{//\ \ \ \ \ \ \ \ double\ min\ =\ std::numeric\_limits<double>::max();}}
\DoxyCodeLine{00067\ \textcolor{comment}{//\ \ \ \ \ \ \ \ for(int\ i\ =\ 0;\ i\ <\ NUM\_ANTS;\ i++)}}
\DoxyCodeLine{00068\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00069\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ sum\ +=\ host\_dist[i];}}
\DoxyCodeLine{00070\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ if(host\_dist[i]\ <\ min)}}
\DoxyCodeLine{00071\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\ =\ host\_dist[i];}}
\DoxyCodeLine{00072\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00073\ \textcolor{comment}{//\ \ \ \ \ \ \ \ double\ avg\ =\ sum\ /\ NUM\_ANTS;}}
\DoxyCodeLine{00074\ \textcolor{comment}{//\ \ \ \ \ \ \ \ std::cout\ <<\ "{}Average\ value\ on\ iter\ "{}\ <<\ iter\ <<\ "{}:\ "{}\ <<\ avg\ <<\ std::endl;}}
\DoxyCodeLine{00075\ \textcolor{comment}{//\ \ \ \ \ \ \ \ std::cout\ <<\ "{}Minimum\ value\ on\ iter\ "{}\ <<\ iter\ <<\ "{}:\ "{}\ <<\ min\ <<\ std::endl;}}
\DoxyCodeLine{00076\ \textcolor{comment}{//\ \ \ \ \ \ \ \ free(host\_dist);}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{//the\ second\ part\ of\ ACO\ is\ to\ evaporate\ the\ pheromones\ uniformly.\ We\ do\ this\ by\ having\ 1\ thread\ for\ each\ edge}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{comment}{//in\ the\ pheromone\ matrix.\ This\ way\ we\ can\ write\ in\ parallel\ and\ update\ the\ matrix\ concurrently}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{evaporate\_pheromone<<<matrix\_blocks,\ THREADS\_PER\_BLOCK>}}>>(\mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\_pheromones}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}});}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaDeviceSynchronize}}();}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//the\ last\ step\ in\ the\ standard\ ACO\ is\ to\ then\ update\ the\ pheromone\ matrix\ with\ the\ ants\ solutions.\ In\ this\ step}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ have\ each\ ant\ be\ responsible\ for\ updating\ the\ edges\ that\ they\ traversed.\ This\ will\ cause\ a\ small\ data\ race}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{comment}{//because\ multiple\ ants\ could\ walk\ the\ same\ edge\ and\ update\ simultaneously,\ but\ we\ handle\ this\ by\ using\ atomic\ operations}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{update\_pheromone<<<GROUPS\_OF\_N\_ANTS,\ THREADS\_PER\_BLOCK>}}>>(\mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\_pheromones}},\ \mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\_distancesHistory}},}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}{dev\_toursHistory}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}});}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaDeviceSynchronize}}();}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ want\ to\ reset\ the\ histories\ of\ each\ ant\ after\ each\ iteration\ (except\ the\ last\ one)\ so\ that\ no\ false\ data\ for}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{//tours\ or\ previous\ city\ visits\ persists\ for\ the\ next\ run}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{iter}}\ <\ \mbox{\hyperlink{ModelParameters_8h_ab3be0641eb76161a48ed528e6eea2ac3}{NUM\_ITERATIONS}}\ -\/\ 1)}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{reset\_histories<<<GROUPS\_OF\_N\_ANTS,\ THREADS\_PER\_BLOCK>}}>>(\mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\_distancesHistory}},\ \mbox{\hyperlink{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}{dev\_toursHistory}},}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a804e24c44514a093b2e4540f827fb263}{dev\_visitedHistory}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaDeviceSynchronize}}();}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//we\ copy\ the\ array\ of\ ant\ distances\ to\ the\ host\ so\ that\ we\ can\ find\ the\ minimum\ distance,\ aka\ best\ solution}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{host\_dist}}\ =\ (\textcolor{keywordtype}{double}*)(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{malloc}}(\mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMemcpy}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{host\_dist}},\ \mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\_distancesHistory}},\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}),\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMemcpyDeviceToHost}});}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{min}}\ =\ std::numeric\_limits<double>::max();}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}++)}
\DoxyCodeLine{00105\ \ \ \ \ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{host\_dist}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}]\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{min}})}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{min}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{host\_dist}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}];}
\DoxyCodeLine{00108\ \ \ \ \ \}}
\DoxyCodeLine{00109\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Minimum\ value:\ "{}}\ <<\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{min}}\ <<\ std::endl;}
\DoxyCodeLine{00110\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{free}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{host\_dist}});}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//free\ memory\ and\ reset\ the\ device\ so\ that\ next\ runs\ are\ completely\ independent}}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a9f81a9a3690fcba7180fa860e0c2422f}{free\_memory}}();}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaDeviceReset}}();}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{min}};}
\DoxyCodeLine{00117\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_a6090d150f203e8e23592b9f30998b808}\label{AntColony_8cu_a6090d150f203e8e23592b9f30998b808} 
\index{AntColony.cu@{AntColony.cu}!allocate\_memory@{allocate\_memory}}
\index{allocate\_memory@{allocate\_memory}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{allocate\_memory()}{allocate\_memory()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} allocate\+\_\+memory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



A function used to allocate all host and device memory in one organized location. 



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00346}{346}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00347\ \{}
\DoxyCodeLine{00348\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95}{host\_distances}}\ =\ (\textcolor{keywordtype}{double}*)(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{malloc}}(\mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00349\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}{host\_pheromones}}\ =\ (\textcolor{keywordtype}{double}*)(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{malloc}}(\mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00350\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a7e7f9470775e0e11270fdd04c2f6cfe5}{host\_distancesHistory}}\ =\ (\textcolor{keywordtype}{double}*)(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{malloc}}(\mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double})));}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMalloc}}(\&\mbox{\hyperlink{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82}{dev\_distances}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}));}
\DoxyCodeLine{00353\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMalloc}}(\&\mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\_pheromones}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}));}
\DoxyCodeLine{00354\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMalloc}}(\&\mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\_distancesHistory}},\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}));}
\DoxyCodeLine{00355\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMalloc}}(\&\mbox{\hyperlink{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}{dev\_toursHistory}},\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));}
\DoxyCodeLine{00356\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMalloc}}(\&\mbox{\hyperlink{AntColony_8cu_a804e24c44514a093b2e4540f827fb263}{dev\_visitedHistory}},\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));}
\DoxyCodeLine{00357\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMalloc}}(\&\mbox{\hyperlink{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4}{dev\_curandStates}},\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}}\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curandState}}));}
\DoxyCodeLine{00358\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_afb1bca5bb39ac0b73c92b33b57123d53}\label{AntColony_8cu_afb1bca5bb39ac0b73c92b33b57123d53} 
\index{AntColony.cu@{AntColony.cu}!evaporate\_pheromone@{evaporate\_pheromone}}
\index{evaporate\_pheromone@{evaporate\_pheromone}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{evaporate\_pheromone()}{evaporate\_pheromone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} evaporate\+\_\+pheromone (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{matrix\+\_\+pheromones,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}}}]{num\+\_\+cities }\end{DoxyParamCaption})}



Allows for uniform pheromone evaporation. 

Uniformly evaporates each edge\textquotesingle{}s pheromones based off of the constant \doxylink{ModelParameters_8h_a3bf4402b9e2ae88e4462c3689f5d22b8}{RHO} 
\begin{DoxyParams}{Parameters}
{\em matrix\+\_\+pheromones} & A pointer to the pheromone matrix to be evaporated \\
\hline
{\em num\+\_\+cities} & The number of cities, aka the dimension of the pheromone matrix \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00244}{244}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00245\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ \mbox{\hyperlink{AntColony_8cu_a1b5a49b05177027e38314c434c172472}{get\_index}}();}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordflow}{if}(index\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}})}
\DoxyCodeLine{00248\ \ \ \ \ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_pheromones}}[index]\ *=\ (1.0\ -\/\ \mbox{\hyperlink{ModelParameters_8h_a3bf4402b9e2ae88e4462c3689f5d22b8}{RHO}});}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{comment}{//UNUSED,\ NOT\ NECESSARY:}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{comment}{//never\ let\ the\ pheromone\ trail\ get\ to\ 0\ or\ less,\ because\ we\ want\ to\ encourage\ exploration}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ the\ pheromone\ trail\ was\ =\ 0,\ no\ ant\ would\ ever\ walk\ on\ this\ route\ again}}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ the\ pheromone\ trail\ was\ <\ 0,\ that\ doesn't\ make\ sense.\ ants\ don't\ produce\ ANTi-\/pheromone\ (ha,\ ant\ pun,\ thanks\ Abbi)}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00257\ \textcolor{comment}{\ \ \ \ \ \ \ \ if(matrix\_pheromones[index]\ <=\ 0.0)}}
\DoxyCodeLine{00258\ \textcolor{comment}{\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00259\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ matrix\_pheromones[index]\ =\ 1.0\ /\ num\_cities;}}
\DoxyCodeLine{00260\ \textcolor{comment}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00261\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00262\ \ \ \ \ \}}
\DoxyCodeLine{00263\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_a9f81a9a3690fcba7180fa860e0c2422f}\label{AntColony_8cu_a9f81a9a3690fcba7180fa860e0c2422f} 
\index{AntColony.cu@{AntColony.cu}!free\_memory@{free\_memory}}
\index{free\_memory@{free\_memory}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{free\_memory()}{free\_memory()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} free\+\_\+memory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



A function used to free all host and device memory at the end of runtime execution. 



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00393}{393}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00394\ \{}
\DoxyCodeLine{00395\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{free}}(\mbox{\hyperlink{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95}{host\_distances}});}
\DoxyCodeLine{00396\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{free}}(\mbox{\hyperlink{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}{host\_pheromones}});}
\DoxyCodeLine{00397\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{free}}(\mbox{\hyperlink{AntColony_8cu_a7e7f9470775e0e11270fdd04c2f6cfe5}{host\_distancesHistory}});}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaFree}}(\mbox{\hyperlink{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82}{dev\_distances}});}
\DoxyCodeLine{00400\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaFree}}(\mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\_pheromones}});}
\DoxyCodeLine{00401\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaFree}}(\mbox{\hyperlink{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}{dev\_distancesHistory}});}
\DoxyCodeLine{00402\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaFree}}(\mbox{\hyperlink{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}{dev\_toursHistory}});}
\DoxyCodeLine{00403\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaFree}}(\mbox{\hyperlink{AntColony_8cu_a804e24c44514a093b2e4540f827fb263}{dev\_visitedHistory}});}
\DoxyCodeLine{00404\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaFree}}(\mbox{\hyperlink{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4}{dev\_curandStates}});}
\DoxyCodeLine{00405\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_a1b5a49b05177027e38314c434c172472}\label{AntColony_8cu_a1b5a49b05177027e38314c434c172472} 
\index{AntColony.cu@{AntColony.cu}!get\_index@{get\_index}}
\index{get\_index@{get\_index}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{get\_index()}{get\_index()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+device\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{unsigned}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} get\+\_\+index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



A helper function to calculate the unique thread ID. 

\begin{DoxyReturn}{Returns}
The unique ID of this thread 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00413}{413}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00414\ \{}
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{blockDim}}.x\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{blockIdx}}.x\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{threadIdx}}.x;}
\DoxyCodeLine{00416\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_a673fea64299ecd234b011d0317c12a2d}\label{AntColony_8cu_a673fea64299ecd234b011d0317c12a2d} 
\index{AntColony.cu@{AntColony.cu}!initialize\_values@{initialize\_values}}
\index{initialize\_values@{initialize\_values}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{initialize\_values()}{initialize\_values()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} initialize\+\_\+values (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{adj\+\_\+mat }\end{DoxyParamCaption})}



A function used to initialize all host memory and copy over initial states to the device when necessary. 


\begin{DoxyParams}{Parameters}
{\em adj\+\_\+mat} & The adjacency matrix for this problem run \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00364}{364}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00365\ \{}
\DoxyCodeLine{00366\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{memcpy}}(\mbox{\hyperlink{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95}{host\_distances}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{adj\_mat}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}));}
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{comment}{//print\_matrix(host\_distances,\ "{}Distances:"{});}}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{comment}{//initialize\ pheromone\ matrix\ to\ INIT\_PHEROMONE\_LEVEL\ as\ an\ arbitrary\ starting\ level}}
\DoxyCodeLine{00370\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}++)}
\DoxyCodeLine{00371\ \ \ \ \ \{}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}\ <\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}++)}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}};}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ !=\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}})}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}{host\_pheromones}}[index]\ =\ \mbox{\hyperlink{ModelParameters_8h_a5d3b9a1c78242b9ccbbd7a69ec287dd8}{INIT\_PHEROMONE\_LEVEL}};}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}{host\_pheromones}}[index]\ =\ 0.0;}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \ \ \}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMemcpy}}(\mbox{\hyperlink{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82}{dev\_distances}},\ \mbox{\hyperlink{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95}{host\_distances}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}),\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMemcpyHostToDevice}});}
\DoxyCodeLine{00387\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMemcpy}}(\mbox{\hyperlink{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}{dev\_pheromones}},\ \mbox{\hyperlink{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}{host\_pheromones}},\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}),\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{cudaMemcpyHostToDevice}});}
\DoxyCodeLine{00388\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_a0c7f129a227865f2816ecdc1561768a1}\label{AntColony_8cu_a0c7f129a227865f2816ecdc1561768a1} 
\index{AntColony.cu@{AntColony.cu}!move\_ant@{move\_ant}}
\index{move\_ant@{move\_ant}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{move\_ant()}{move\_ant()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} move\+\_\+ant (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{matrix\+\_\+pheromones,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{matrix\+\_\+distances,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curand\+State}} \texorpdfstring{$\ast$}{*}}]{states,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+distances,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+tours,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+visited,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}}}]{num\+\_\+cities }\end{DoxyParamCaption})}



Function that handles the probabilistic tour generation behavior each ant will have. 

Each ant probabilistically generates a tour using roulette wheel selection for random city movement. The roulette wheel is determined by the probability equation for ACO. Ants start at unique cities, ensuring that no edge is favored over any other. The ants start at the city equal to the ant\textquotesingle{}s unique ID mod the number of cities, so that we get an even distribution of ants starting at each city. This ensures the solution space is appropriately explored. 
\begin{DoxyParams}{Parameters}
{\em matrix\+\_\+pheromones} & Pheromone matrix to help guide the ants \\
\hline
{\em matrix\+\_\+distances} & Distance matrix provided for visible heuristic information \\
\hline
{\em states} & cu\+RAND states used for generating random probabilities. This can be optimized to have pre-\/generated random numbers instead of generating them on the device during runtime \\
\hline
{\em history\+\_\+distances} & An array so that each ant can store its distance at the end of tour generation \\
\hline
{\em history\+\_\+tours} & An array of size num\+\_\+ants \texorpdfstring{$\ast$}{*} num\+\_\+cities so that each ant can record its tour in order \\
\hline
{\em history\+\_\+visited} & An array of size num\+\_\+ants \texorpdfstring{$\ast$}{*} num\+\_\+cities so that each ant can track the cities they\textquotesingle{}ve visited this iteration \\
\hline
{\em num\+\_\+cities} & The number of cities each and must visit \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00137}{137}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00139\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//where\ the\ ant's\ history\ starts}}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ =\ \mbox{\hyperlink{AntColony_8cu_a1b5a49b05177027e38314c434c172472}{get\_index}}();}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//we\ will\ get\ an\ even\ distribution\ of\ ants\ starting\ at\ the\ various\ cities}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//with\ roughly\ an\ even\ number\ of\ ants\ starting\ at\ each\ city}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}})\ \%\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}};}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_visited}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}}]\ =\ 1;}
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}]\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}};}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{comment}{//printf("{}Thread\ \%d:\%d\ starts\ at\ city\ \%d\(\backslash\)n"{},\ blockIdx.x,\ threadIdx.x,\ current\_city);}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{comment}{//we\ will\ iterate\ n\ -\/\ 1\ times,\ because\ we\ already\ know\ where\ we\ want\ to\ start}}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{comment}{//on\ each\ iteration,\ we\ will\ calculate\ the\ probabilities\ of\ visiting\ each\ city}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{comment}{//that\ this\ ant\ hasn't\ visited\ yet,\ then\ use\ roulette\ wheel\ selection\ to\ visit}}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{comment}{//a\ city\ determined\ probabilistically.\ Once\ this\ loop\ completes,\ we\ need\ to\ also}}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{comment}{//add\ the\ distance\ travelled\ from\ the\ last\ visited\ city,\ back\ to\ the\ beginning}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{comment}{//because\ a\ tour\ is\ only\ finished\ once\ we\ return\ to\ where\ we\ started}}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ =\ 1;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}++)}
\DoxyCodeLine{00158\ \ \ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ only\ care\ about\ accumulating\ probability\ for\ cities\ we\ have\ not\ visited}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ want\ to\ compute:}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\(\backslash\)sum\_\{m\(\backslash\)in\ allowed\}\ \(\backslash\)tau\_\{im\}\string^\(\backslash\)alpha\ \(\backslash\)cdot\ \(\backslash\)eta\_\{im\}\string^\(\backslash\)beta}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{comment}{//where\ allowed\ is\ all\ cities\ we\ haven't\ visited\ yet}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{total\_prob}}\ =\ 0.0;}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}++)}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//aka\ we\ have\ not\ yet\ visited\ this\ city}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_visited}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}]\ !=\ 1)}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}};}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{tau}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_pheromones}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}];}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{eta}}\ =\ 1.0\ /\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}];}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{total\_prob}}\ +=\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{pow}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{tau}},\ \mbox{\hyperlink{ModelParameters_8h_af5abd28c44c29b7397c84f1fec4b1d84}{ALPHA}})\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{pow}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{eta}},\ \mbox{\hyperlink{ModelParameters_8h_a1b996515309fc3c03449912bb33046e3}{BETA}});}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{comment}{//perform\ roulette\ wheel\ selection\ to\ select\ our\ next\ city}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{r}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curand\_uniform}}(\&\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{states}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}])\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{total\_prob}};}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{accum\_prob}}\ =\ 0.0;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}}\ =\ -\/1;}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{comment}{//for\ each\ possible\ city,\ we\ want\ to\ compute:}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\(\backslash\)tau\_\{im\}\string^\(\backslash\)alpha\ \(\backslash\)cdot\ \(\backslash\)eta\_\{im\}\string^\(\backslash\)beta}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{comment}{//so\ that\ we\ can\ calculate\ P\_\{ij\}\ as\ this\ product\ divided\ by\ the\ sum\ calculated\ above}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{last\_best}}\ =\ 0;}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}++)}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_visited}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}}]\ !=\ 1)}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{last\_best}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}};}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}};}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{tau}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_pheromones}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}];}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{eta}}\ =\ 1.0\ /\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}];}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{prob}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{pow}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{tau}},\ \mbox{\hyperlink{ModelParameters_8h_af5abd28c44c29b7397c84f1fec4b1d84}{ALPHA}})\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{pow}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{eta}},\ \mbox{\hyperlink{ModelParameters_8h_a1b996515309fc3c03449912bb33046e3}{BETA}});}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//double\ prob\ =\ num\ /\ total\_prob;}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{accum\_prob}}\ +=\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{prob}};}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//printf("{}\(\backslash\)tThread\ \%d:\%d\ tried\ to\ go\ to\ city\ \%d,\ with\ a\ probability\ of\ \%2.2f\ where\ accum\ prob\ =\ \%2.2f\(\backslash\)n"{},\ blockIdx.x,\ threadIdx.x,\ next\_city,\ prob,\ accum\_prob);}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{accum\_prob}}\ >=\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{r}})}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{next\_city}};}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{comment}{//used\ for\ error\ checking\ just\ in\ case\ our\ indexing\ was\ incorrect}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}}\ ==\ -\/1)}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{last\_best}};}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{printf}}(\textcolor{stringliteral}{"{}ERROR\ -\/1\ ||\ \%d\ ||\ accumProb\ \%f\ ||\ r\ \%f\(\backslash\)n"{}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{accum\_prob}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{r}});}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{comment}{//printf("{}Thread\ \%d:\%d\ is\ now\ visiting\ city\ \%d\(\backslash\)n"{},\ blockIdx.x,\ threadIdx.x,\ selected\_city);}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{comment}{//now\ that\ we\ have\ selected\ a\ city\ using\ the\ probability\ equation}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ want\ to\ actually\ move\ to\ that\ city.}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{comment}{//We\ need\ to\ add\ this\ city\ to\ this\ ant's\ tour,\ add\ this\ city\ to\ this}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//ant's\ visited\ history,\ and\ add\ the\ distance\ from\ this\ move\ to\ this\ ant's}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{comment}{//distance\ history}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}]\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}};}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_visited}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}}]\ =\ 1;}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}]\ +=\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}}];}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{current\_city}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{selected\_city}};}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{comment}{//we\ need\ to\ return\ to\ the\ starting\ city\ now}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{comment}{//we\ go\ from\ the\ last\ visited\ city}}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{from}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ -\/\ 1)];}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{comment}{//to\ the\ first\ visited\ city}}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{to}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}];}
\DoxyCodeLine{00234\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}]\ +=\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{from}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{to}}];}
\DoxyCodeLine{00235\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_af49fe3083b19f6f211b2c8d626854170}\label{AntColony_8cu_af49fe3083b19f6f211b2c8d626854170} 
\index{AntColony.cu@{AntColony.cu}!print\_matrix@{print\_matrix}}
\index{print\_matrix@{print\_matrix}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{print\_matrix()}{print\_matrix()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} print\+\_\+matrix (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{matrix,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{char}} \texorpdfstring{$\ast$}{*}}]{msg }\end{DoxyParamCaption})}



A simple helper function to print a matrix, useful for debugging. 


\begin{DoxyParams}{Parameters}
{\em matrix} & Matrix to be printed \\
\hline
{\em msg} & Message to be included along with the printing of the matrix \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00437}{437}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00438\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{printf}}(\textcolor{stringliteral}{"{}\%s:\ \(\backslash\)n"{}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{msg}});}
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}++)}
\DoxyCodeLine{00441\ \ \ \ \ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}\ <\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}++)}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{printf}}(\textcolor{stringliteral}{"{}\%2.2f\(\backslash\)t"{}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ *\ \mbox{\hyperlink{AntColony_8cu_a69579af52345ffaee98944067860c4cd}{cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{j}}]);}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{printf}}(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00447\ \ \ \ \ \}}
\DoxyCodeLine{00448\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_af524c262fedf7990583bf352fe3715bb}\label{AntColony_8cu_af524c262fedf7990583bf352fe3715bb} 
\index{AntColony.cu@{AntColony.cu}!reset\_histories@{reset\_histories}}
\index{reset\_histories@{reset\_histories}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{reset\_histories()}{reset\_histories()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} reset\+\_\+histories (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+distances,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+tours,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+visited,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}}}]{num\+\_\+cities }\end{DoxyParamCaption})}



A function used to reset the histories of each ant to prevent confusion in future iterations. 


\begin{DoxyParams}{Parameters}
{\em history\+\_\+distances} & The distance history of each ant \\
\hline
{\em history\+\_\+tours} & The tour history of each ant \\
\hline
{\em history\+\_\+visited} & The visited cities of each ant (should be an array of all 1s) \\
\hline
{\em num\+\_\+cities} & The size of the problem \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00329}{329}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00330\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ =\ \mbox{\hyperlink{AntColony_8cu_a1b5a49b05177027e38314c434c172472}{get\_index}}();}
\DoxyCodeLine{00332\ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}]\ =\ 0.0;}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}++)}
\DoxyCodeLine{00335\ \ \ \ \ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}]\ =\ 0;}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_visited}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}]\ =\ 0;}
\DoxyCodeLine{00338\ \ \ \ \ \}}
\DoxyCodeLine{00339\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}\label{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192} 
\index{AntColony.cu@{AntColony.cu}!setup\_curand\_states@{setup\_curand\_states}}
\index{setup\_curand\_states@{setup\_curand\_states}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{setup\_curand\_states()}{setup\_curand\_states()}}
{\footnotesize\ttfamily \+\_\+\+\_\+global\+\_\+\+\_\+ void setup\+\_\+curand\+\_\+states (\begin{DoxyParamCaption}\item[{curand\+State \texorpdfstring{$\ast$}{*}}]{dev\+\_\+states,  }\item[{unsigned long}]{seed }\end{DoxyParamCaption})}



A helper function to initialize cu\+RAND states with a random seed. 


\begin{DoxyParams}{Parameters}
{\em dev\+\_\+states} & A pointer to the cu\+RAND states on the device needing initialization \\
\hline
{\em seed} & The randomly determined seed \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00423}{423}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00424\ \{}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ index\ =\ \mbox{\hyperlink{AntColony_8cu_a1b5a49b05177027e38314c434c172472}{get\_index}}();}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordflow}{if}(index\ <\ \mbox{\hyperlink{ModelParameters_8h_a8d7114d1439b8bf84f84d84b6a5e99d5}{NUM\_ANTS}})}
\DoxyCodeLine{00427\ \ \ \ \ \{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curand\_init}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{seed}},\ index,\ 0,\ \&\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{dev\_states}}[index]);}
\DoxyCodeLine{00429\ \ \ \ \ \}}
\DoxyCodeLine{00430\ \}}

\end{DoxyCode}
\Hypertarget{AntColony_8cu_a8628347ed6a7c0800505c9def85d48fb}\label{AntColony_8cu_a8628347ed6a7c0800505c9def85d48fb} 
\index{AntColony.cu@{AntColony.cu}!update\_pheromone@{update\_pheromone}}
\index{update\_pheromone@{update\_pheromone}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{update\_pheromone()}{update\_pheromone()}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{\+\_\+\+\_\+global\+\_\+\+\_\+}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{void}} update\+\_\+pheromone (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{matrix\+\_\+pheromones,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+distances,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{const}} \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*}}]{history\+\_\+tours,  }\item[{\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}}}]{num\+\_\+cities }\end{DoxyParamCaption})}



Updating the pheromones according to the standard constant pheromone deposit method. 

We use the standard constant pheromone deposit method for simplicity, but the AS-\/\+LBT method of pheromone updating shows substantially better results. This is an area of future work we want to consider to improve this algorithm 
\begin{DoxyParams}{Parameters}
{\em matrix\+\_\+pheromones} & A pointer to the pheromone matrix to be updated \\
\hline
{\em history\+\_\+distances} & Each ant\textquotesingle{}s solution found on this iteration \\
\hline
{\em history\+\_\+tours} & Each ant\textquotesingle{}s tour for this iteration \\
\hline
{\em num\+\_\+cities} & The number of cities each ant visited \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00275}{275}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00276\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ =\ \mbox{\hyperlink{AntColony_8cu_a1b5a49b05177027e38314c434c172472}{get\_index}}();}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{comment}{//assert(history\_distances[ant\_id]\ >\ 0);}}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{comment}{//constant\ pheromone\ deposit\ method}}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{pheromone\_delta}}\ =\ \mbox{\hyperlink{ModelParameters_8h_acbcee443d6d55cb8600b3f240f5cf907}{Q}}\ /\ (\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_distances}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}]\ +\ 0.001);}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{//iterate\ through\ each\ edge\ traveled\ by\ an\ ant}}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ =\ 0;\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}};\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}++)}
\DoxyCodeLine{00285\ \ \ \ \ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{from}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{to}};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ we\ aren't\ at\ the\ end\ of\ the\ tour\ yet}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ <\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ -\/\ 1)}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ want\ to\ add\ the\ pheromone\ delta\ to\ the\ edge\ \{v\_i,\ v\_\{i+1\}\}}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{from}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}];}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{to}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}\ +\ 1];}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{comment}{//if\ we\ are\ at\ the\ end\ of\ the\ tour}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ want\ to\ add\ the\ pheromone\ delta\ to\ the\ edge\ \{v\_\{n-\/1\},\ v\_0\}}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//this\ is\ because\ we\ want\ to\ end\ the\ full\ tour\ where\ we\ started\ (v\_0)}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{from}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{i}}];}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{to}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{history\_tours}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{ant\_id}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}];}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{comment}{//we\ update\ the\ entry\ at\ city\_index\ with\ the\ pheromone\ delta}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{//because\ we\ are\ using\ the\ pheromone\ matrix\ to\ represent\ the\ weight}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{comment}{//of\ traveling\ where\ start\ =\ from\ and\ end\ =\ to.\ Since\ we\ collapsed\ the}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{comment}{//matrix\ into\ a\ 1d\ array,\ the\ edge\ between\ vertices\ \{from,\ to\}\ is\ stored}}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{comment}{//at\ the\ ant\_id\ from\ *\ n\ +\ to,\ where\ n\ =\ num\_cities.\ This\ is\ a\ standard\ way}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \textcolor{comment}{//of\ using\ a\ 1d\ array\ as\ a\ matrix}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}\ =\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{from}}\ *\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{num\_cities}}\ +\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{to}};}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{comment}{//printf("{}Ant\ \%d\ went\ from\ \%d\ to\ \%d\(\backslash\)n"{},\ ant\_id,\ from,\ to);}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{comment}{//this\ kernel\ runs\ once\ for\ each\ ant,\ so\ that\ each\ ant's\ matrix\_pheromones}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{comment}{//can\ be\ calculated\ in\ parallel,\ but\ we\ must\ use\ atomic\ operations}}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{comment}{//as\ to\ not\ overwrite\ our\ update\ when\ another\ ant\ is\ currently\ updating}}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{a}}\ =\ \&\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{matrix\_pheromones}}[\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{city\_index}}];}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{atomicAdd}}(\mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{a}},\ \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{pheromone\_delta}});}
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\Hypertarget{AntColony_8cu_a69579af52345ffaee98944067860c4cd}\label{AntColony_8cu_a69579af52345ffaee98944067860c4cd} 
\index{AntColony.cu@{AntColony.cu}!cities@{cities}}
\index{cities@{cities}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{cities}{cities}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} cities}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00008}{8}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4}\label{AntColony_8cu_a7a9bc3d879ddb4da65bc3b4a2206b7f4} 
\index{AntColony.cu@{AntColony.cu}!dev\_curandStates@{dev\_curandStates}}
\index{dev\_curandStates@{dev\_curandStates}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{dev\_curandStates}{dev\_curandStates}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{curand\+State}}\texorpdfstring{$\ast$}{*} dev\+\_\+curand\+States}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00018}{18}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82}\label{AntColony_8cu_aa0d6d8da95d12b515caec3677dea1e82} 
\index{AntColony.cu@{AntColony.cu}!dev\_distances@{dev\_distances}}
\index{dev\_distances@{dev\_distances}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{dev\_distances}{dev\_distances}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}}\texorpdfstring{$\ast$}{*} dev\+\_\+distances}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00011}{11}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598}\label{AntColony_8cu_ae588e7ba409f63a6a591c26ab5ed9598} 
\index{AntColony.cu@{AntColony.cu}!dev\_distancesHistory@{dev\_distancesHistory}}
\index{dev\_distancesHistory@{dev\_distancesHistory}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{dev\_distancesHistory}{dev\_distancesHistory}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}}\texorpdfstring{$\ast$}{*} dev\+\_\+distances\+History}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00014}{14}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f}\label{AntColony_8cu_a77a4298b9e791d37ac8170459b35791f} 
\index{AntColony.cu@{AntColony.cu}!dev\_pheromones@{dev\_pheromones}}
\index{dev\_pheromones@{dev\_pheromones}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{dev\_pheromones}{dev\_pheromones}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} dev\+\_\+pheromones}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00011}{11}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec}\label{AntColony_8cu_ad9b3458e30694614f12776ac6744a6ec} 
\index{AntColony.cu@{AntColony.cu}!dev\_toursHistory@{dev\_toursHistory}}
\index{dev\_toursHistory@{dev\_toursHistory}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{dev\_toursHistory}{dev\_toursHistory}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}}\texorpdfstring{$\ast$}{*} dev\+\_\+tours\+History}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00016}{16}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_a804e24c44514a093b2e4540f827fb263}\label{AntColony_8cu_a804e24c44514a093b2e4540f827fb263} 
\index{AntColony.cu@{AntColony.cu}!dev\_visitedHistory@{dev\_visitedHistory}}
\index{dev\_visitedHistory@{dev\_visitedHistory}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{dev\_visitedHistory}{dev\_visitedHistory}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{int}} \texorpdfstring{$\ast$}{*} dev\+\_\+visited\+History}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00016}{16}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95}\label{AntColony_8cu_aa7fb7ac1449177cf1d68463d56aa8b95} 
\index{AntColony.cu@{AntColony.cu}!host\_distances@{host\_distances}}
\index{host\_distances@{host\_distances}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{host\_distances}{host\_distances}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}}\texorpdfstring{$\ast$}{*} host\+\_\+distances}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00010}{10}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_a7e7f9470775e0e11270fdd04c2f6cfe5}\label{AntColony_8cu_a7e7f9470775e0e11270fdd04c2f6cfe5} 
\index{AntColony.cu@{AntColony.cu}!host\_distancesHistory@{host\_distancesHistory}}
\index{host\_distancesHistory@{host\_distancesHistory}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{host\_distancesHistory}{host\_distancesHistory}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}}\texorpdfstring{$\ast$}{*} host\+\_\+distances\+History}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00013}{13}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

\Hypertarget{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b}\label{AntColony_8cu_a28dead550744f139f15d842ce88b9d4b} 
\index{AntColony.cu@{AntColony.cu}!host\_pheromones@{host\_pheromones}}
\index{host\_pheromones@{host\_pheromones}!AntColony.cu@{AntColony.cu}}
\doxysubsubsection{\texorpdfstring{host\_pheromones}{host\_pheromones}}
{\footnotesize\ttfamily \mbox{\hyperlink{AntColony_8cu_ace5d2dbc52193d125be3ec4a13c5c192}{double}} \texorpdfstring{$\ast$}{*} host\+\_\+pheromones}



Definition at line \mbox{\hyperlink{AntColony_8cu_source_l00010}{10}} of file \mbox{\hyperlink{AntColony_8cu_source}{Ant\+Colony.\+cu}}.

